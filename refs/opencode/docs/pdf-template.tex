\documentclass[12pt,a4paper]{article}
\usepackage{xeCJK}
\usepackage{geometry}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{titlesec}
\usepackage{enumitem}
\usepackage{hyperref}
\usepackage{listings}
\usepackage{tcolorbox}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}

% 页面设置
\geometry{top=2.5cm, bottom=2.5cm, left=2.5cm, right=2.5cm}

% 中文字体
\setCJKmainfont{STSong}
\setCJKsansfont{STHeiti}
\setCJKmonofont{STFangsong}

% 颜色定义
\definecolor{primary}{RGB}{0, 102, 204}
\definecolor{secondary}{RGB}{51, 51, 51}
\definecolor{codebg}{RGB}{245, 245, 245}

% 标题样式
\titleformat{\section}{\Large\bfseries\color{primary}}{\thesection}{1em}{}
\titleformat{\subsection}{\large\bfseries\color{secondary}}{\thesubsection}{1em}{}
\titleformat{\subsubsection}{\normalsize\bfseries}{\thesubsubsection}{1em}{}

% 代码样式
\lstset{
  backgroundcolor=\color{codebg},
  basicstyle=\ttfamily\small,
  breaklines=true,
  frame=single,
  rulecolor=\color{gray},
}

% 超链接
\hypersetup{
  colorlinks=true,
  linkcolor=primary,
  urlcolor=primary,
}

% 页眉页脚
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\leftmark}
\fancyhead[R]{OpenCode Agent Platform}
\fancyfoot[C]{\thepage}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}

$if(title)$
\title{$title$}
$endif$
$if(author)$
\author{$author$}
$endif$
\date{$date$}

\begin{document}

$if(title)$
\maketitle
$endif$

$if(toc)$
\tableofcontents
\newpage
$endif$

$body$

\end{document}
